<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Игра Память</title>
		<style>
			body {
				font-family: sans-serif;
				background: #222;
				color: white;
				text-align: center;
				padding: 20px;
			}

			h1 {
				margin-bottom: 20px;
			}

			.memory-game {
				width: 320px;
				margin: 0 auto;
				display: grid;
				grid-template-columns: repeat(4, 1fr);
				gap: 10px;
			}

			.memory-card {
				width: 70px;
				height: 70px;
				position: relative;
				perspective: 1000px; /* нужно для 3D вращения */
			}

			.card-inner {
				width: 100%;
				height: 100%;
				position: relative;
				transition: transform 0.5s;
				transform-style: preserve-3d;
			}

			.memory-card.flip .card-inner {
				transform: rotateY(180deg);
			}

			.front-face,
			.back-face {
				position: absolute;
				width: 100%;
				height: 100%;
				backface-visibility: hidden;
				border-radius: 5px;
				top: 0;
				left: 0;
			}

			.front-face {
				transform: rotateY(180deg);
				object-fit: cover;
			}

			.back-face {
				background: #999;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 24px;
				color: black;
			}

			#continueBtn {
				display: none;
				margin-top: 20px;
				padding: 10px 20px;
				background: #2196f3;
				color: white;
				border: none;
				border-radius: 5px;
				cursor: pointer;
			}

			#continueBtn:hover {
				background-color: #0b7dda;
			}
			@media screen and (max-width: 360px) {
				body {
					padding: 0;
				}
				.memory-card {
					width: 60px;
					height: 60px;
				}
			}
		</style>
	</head>
	<body>
		<h1>Игра «Память»</h1>
		<div class="memory-game"></div>

		<button id="continueBtn" onclick="goNextPage()">Продолжить</button>

		<script>
			const images = [
				'assets/images/photo4.jpg',
				'assets/images/photo5.jpg',
				'assets/images/photo6.jpg',
				'assets/images/photo7.jpg',
				'assets/images/photo10.jpg',
				'assets/images/photo13.jpg',
				'assets/images/photo15.jpg',
				'assets/images/photo9.jpg',
			]

			const gameContainer = document.querySelector('.memory-game')
			let cards = []
			let hasFlippedCard = false
			let lockBoard = false
			let firstCard, secondCard
			let matchedPairs = 0

			function setupGame() {
				const allImages = [...images, ...images]
				allImages.sort(() => 0.5 - Math.random())

				allImages.forEach(src => {
					const card = document.createElement('div')
					card.classList.add('memory-card')
					card.innerHTML = `
          <div class="card-inner">
            <img src="${src}" class="front-face" />
            <div class="back-face">?</div>
          </div>
            `
					card.addEventListener('click', flipCard)
					gameContainer.appendChild(card)
					cards.push(card)
				})
			}

			function flipCard() {
				if (lockBoard || this === firstCard) return

				this.classList.add('flip')

				if (!hasFlippedCard) {
					hasFlippedCard = true
					firstCard = this
					return
				}

				secondCard = this
				checkForMatch()
			}

			function checkForMatch() {
				const isMatch =
					firstCard.querySelector('img').src ===
					secondCard.querySelector('img').src
				isMatch ? disableCards() : unflipCards()
			}

			function disableCards() {
				firstCard.removeEventListener('click', flipCard)
				secondCard.removeEventListener('click', flipCard)
				resetBoard()

				matchedPairs++
				if (matchedPairs === 8) {
					document.getElementById('continueBtn').style.display = 'inline-block'
					setTimeout(() => alert('Поздравляем! Все пары найдены!'), 300)
				}
			}

			function unflipCards() {
				lockBoard = true
				setTimeout(() => {
					firstCard.classList.remove('flip')
					secondCard.classList.remove('flip')
					resetBoard()
				}, 1000)
			}

			function resetBoard() {
				;[hasFlippedCard, lockBoard] = [false, false]
				;[firstCard, secondCard] = [null, null]
			}

			function goNextPage() {
				window.location.href = 'gallery.html' // замени на нужный URL
			}

			setupGame()
		</script>
	</body>
</html>
